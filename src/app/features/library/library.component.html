<section class="min-h-screen bg-gradient-to-br from-purple-900 to-black">
  <!-- Header avec l'icÃ´ne et le titre -->
  <div class="flex w-full justify-start items-center p-6 gap-4">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="24" height="24" fill="none">
      <path
        d="M2 9C2 5.70017 2 4.05025 3.02513 3.02513C4.05025 2 5.70017 2 9 2H11C14.2998 2 15.9497 2 16.9749 3.02513C18 4.05025 18 5.70017 18 9V11C18 14.2998 18 15.9497 16.9749 16.9749C15.9497 18 14.2998 18 11 18H9C5.70017 18 4.05025 18 3.02513 16.9749C2 15.9497 2 14.2998 2 11V9Z"
        stroke="currentColor" stroke-width="2"/>
      <path
        d="M18.2383 7C19.5732 7.08138 20.4232 7.30467 21.036 7.91738C22 8.88143 22 10.433 22 13.5363V15.4171C22 18.5203 22 20.0719 21.036 21.036C20.0719 22 18.5203 22 15.4171 22H13.5363C10.433 22 8.88143 22 7.91738 21.036C7.30467 20.4232 7.08138 19.5732 7 18.2383"
        stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
      <path
        d="M11 12V6C11.2222 6.4 11.4 8.08 13 8.4M11 12C11 13.1046 10.1046 14 9 14C7.89543 14 7 13.1046 7 12C7 10.8954 7.89543 10 9 10C10.1046 10 11 10.8954 11 12Z"
        stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
    </svg>
    <h1 class="text-xl font-extrabold capitalize leading-none tracking-tight text-white md:text-2xl lg:text-3xl">
      Library
    </h1>
  </div>

  <div *ngIf="editMode" class="modal-overlay" (click)="closeModal()">
    <div class="modal-content" (click)="$event.stopPropagation()">
      <form [formGroup]="trackForm" (ngSubmit)="addOrUpdateTrack()">
        <h2>{{ editMode ? 'Update Track' : 'Add Track' }}</h2>
        <input formControlName="title" placeholder="Track Title" class="input-class"/>
        <input formControlName="artist" placeholder="Artist Name" class="input-class"/>
        <input formControlName="category" placeholder="Category" class="input-class"/>
        <select formControlName="category" class="input-class">
          <option value="" disabled selected>Select Category</option>
          <option *ngFor="let category of categories" [value]="category">
            {{ category }}
          </option>
        </select>
        <textarea formControlName="description" placeholder="Track Description" class="input-class"></textarea>
        <button type="submit" [disabled]="trackForm.invalid" class="submit-btn">{{ editMode ? 'Update Track' : 'Add Track' }}
        </button>
        <button type="button" (click)="closeModal()" class="close-btn">
          Close
        </button>
      </form>
    </div>
  </div>

  <!-- Table Content -->
  <div class="px-20">
    <!-- Table Header -->
    <div class="grid grid-cols-4 border-b border-purple-700 pb-2 text-sm font-medium">
      <div class="col-span-1">Artist</div>
      <div class="col-span-1">Title</div>
      <div class="col-span-1">Category</div>
      <div class="col-span-1">Operation</div>
    </div>

    <!-- Table Content -->
    <ng-container *ngIf="tracks$ | async as tracks">
      <div *ngIf="tracks.length > 0; else noTracks">
        <div *ngFor="let track of tracks" class="grid grid-cols-4 py-3 border-b border-purple-800 hover:bg-purple-800/50">
          <div class="col-span-1 flex items-center gap-3">
            <img
              src="assets/images/track_default_bg.jpg"
              class="w-8 h-8 rounded"
              alt="Track thumbnail"
            />
            <span class="text-sm">{{ track.artist }}</span>
          </div>
          <div class="col-span-1 flex items-center text-sm text-start">{{ track.title }}</div>
          <div class="col-span-1 flex items-center text-sm">{{ track.category }}</div>
          <div class="col-span-1 flex items-center text-sm gap-4">
            <!-- Update Icon -->
            <button (click)="editTrack(track)" class="hover:text-yellow-500">
              <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" width="20" height="20">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11 4h10M9 16v4a1 1 0 001 1h4m-5-5l6-6a2 2 0 012.828 0l2 2a2 2 0 010 2.828l-6 6m-4 2H7a2 2 0 01-2-2v-4a2 2 0 01.586-1.414l10-10"
                />
              </svg>
            </button>

            <!-- Delete Icon -->
            <button class="hover:text-red-500" (click)="deleteTrack(track.id!)">
              <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" width="20" height="20">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                      d="M6 18L18 6M6 6l12 12" />
              </svg>
            </button>

          </div>
        </div>
      </div>
    </ng-container>

    <ng-template #noTracks>
      <div class="text-center py-4 text-gray-400">
        No tracks available
      </div>
    </ng-template>
  </div>
</section>
